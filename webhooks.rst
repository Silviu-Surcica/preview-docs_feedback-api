**CONFIDENTIAL**

==================================
Webhooks
==================================

Your webhook URL will be registered once upon API whitelisting. The request to your webhook URL is a POST request. Basic auth credentials will be included if provided.

Example Request
------------------

.. code:: javascript

  {
    "event_type": "feedback.updated",
    "created_at": "SatDec1517:58:22+00002015",
    "feedback": {
      "created_at": "SatDec1517:58:20+00002015",
      "updated_at": "SatDec1517:58:22+00002015",
      "id": "123456789",
      "type": "nps",
      "test": false,
      "dm_id": "8989898989",
      "from_user_id": "1212121212121",
      "to_user_id": "343434343434",
      "privacy_url": "h ttps://myÂ­business.domain/privacy",
      "external_id": "ticket_5555",
      "question_variant_id": 3,
      "display_name": "MyBusinessName",
      "response": {
        "score": {
          "created_at": "SatDec1518:58:22+00002015",
          "value": 1
        },
        "text": {
          "created_at": "SatDec1518:58:22+00002015",
          "value": "I<3thisbiz"
        }
      }
    }
  }

Recommended Security for Webhooks
------------------------------------------------------------------------------------------

To secure the integrity of your customer data the following recommendations are provided for the webhook URL:

Password requirements
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
   - At least 20 characters. Longer is better
   - Randomly generated by a computer
   - Use all permitted characters sets

Whitelist Twitter Aggregate Network IP Blocks
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
   - 199.59.148.0/22
   - 199.16.156.0/22

Required Server Configurations
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
- A- rating on `ssllabs.com <http://ssllabs.com>`_ test. Please provide a PDF report upon webhook request.
- Enable TLS 1.1 and 1.2
- Enable Forward Secrecy
- Disable SSLv2
- Disable SSLv3 (because POODLE)
- Disable TLS 1.0
- Disable TLS Compression
- Disable Session Tickets unless you rotate session ticket keys.
- Set the "ssl_prefer_server_ciphers" or "SSLHonorCipherOrder" option in the SSL Configuration "on"
- Ensure the list of ciphers is a modern list such as:

  .. code:: javascript

    ECDHE-RSA-AES128-GCM-SHA256:ECDHE-RSA-AES128-SHA256:ECDHE-RSA-AES128-SHA:ECDHE-RSA-AES256-GCM-SHA384:ECDHE-RSA-AES256-SHA384:ECDHE-RSA-AES256-SHA:AES128-GCM-SHA256:AES128-SHA256:AES128-SHA:AES256-GCM-SHA384:AES256-SHA256:AES256-SHA:ECDHE-RSA-DES-CBC3-SHA:DES-CBC3-SHA
